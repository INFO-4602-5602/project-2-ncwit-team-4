<html>
<head>
    <title>INFO 4602 Project 2 Group 4</title>
    <style type="text/css" href="project1.css"></style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!--Put your D3 import statement between these two lines-->
    <script src="http://d3js.org/d3.v4.js" charset="utf-8"></script>


    <!--Put your D3 import statement between these two lines-->
    <!--Import Pure CSS module https://purecss.io/-->
    <link rel="stylesheet" href="project2.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css"
          integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w"
          crossorigin="anonymous">
</head>

<body>
  <!--Apple Pure Menu Package/-->
  <div class="pure-menu pure-menu-horizontal" id="tab_bar">
    <style scoped>
       .button-menu {
         overflow: hidden;
         display: inline-block;
         font-size: 150%;
         line-height: 2;
         width: 170;
         color: black;
         background-color: white;
         border: none;
         outline: none;
       }
       .pure-button:hover{
         background-color: grey;
         color: white;
       }
   </style>
    <button class="button-menu pure-button pure-button-active" id="part1">Student vs Year</button>
    <button class="button-menu pure-button pure-button-active" id="part2">Score vs Major</button>
    <button class="button-menu pure-button pure-button-active" id="part3_4">5th Asian Female</button>
    <button class="button-menu pure-button pure-button-active" id="part5">Yi Man</button>
    <button class="button-menu pure-button pure-button-active" id="part6">Tianlun Zhao</button>
  </div>

  <div id="content">
    <style scoped>
       .extra {
         font-family: inherit;
         font-size: 200%;
       }
   </style>
    <div id="partOne">
        <h1>Student vs Year</h1>
        <h2>Enrollment Year vs Student number with different races</h2>
        <select id="data_select">
          <option value=0>Asian</option>
          <option value=1>Black/African American </option>
          <option value=2>Native Hawaiian/Other Pacific Islande</option>
          <option value=3>Hispanics</option>
          <option value=4>American Indian/Alaska Native </option>
          <option value=5>White</option>
        </select>
        <div id="linegraph">
          <p id="lineLabel"></p>
        </div>
        <div class="extra" id="GeneralMode"><a href="index_orange.html">General Relationship between Enrollment Year and Student number</a>
        </div>
    </div>

    <div id="partTwo">
        <h1>Score vs Major: </h1>
        <h2>Female Average SAT & ACT Math Score base on Years and Major</h2>
        <p>This figure is just an overview and the widget is unfunctional. The full code is attached in the link below.</p>
        <div class="extra" id="Original file"><a href="jupyter.html">Original File</a>
        </div>
        <div>
          <img src="image/jupyter.jpg" alt="Hathaway's great plot" style="width:800px;height:700px;">
        </div>
    </div>

    <div id="partThree">
      <h1>5th Asian Female: </h1>
      <h2>5th Asian Female Student/School year</h2>
      <div id="linegraph3">
        <p id="lineLabel3"></p>
      </div>
    </div>

    <div id="partFive">
      <h1>Part Six: </h1>
      <div>
        <h2>Anscombe I</h2>
        <img src="image/Anscombe_I.png">
      </div>
    </div>


    <!--Replicate each of your graphs using Excel-->
    <div id="partSix">
      <h1>Part Six: </h1>
      <div>
        <h2>Anscombe II</h2>
        <img src="image/Anscombe_II.png">
      </div>
    </div>

    <script type="text/javascript">
        // Student vs Year
        part1(0);
        var select=document.getElementById("data_select");
        select.addEventListener("change",function(d){
          // add an event listener to trigger the polt changes
          part1(select.value);
        });
        function part1(value){
          var div = document.getElementById('linegraph');
          while(div.firstChild){
            div.removeChild(div.firstChild);
          }
          var margin = {top:20, right: 20, bottom: 30, left: 50},
              width = 800- margin.left - margin.right,
              height = 450 - margin.top - margin.bottom;
          var xValue = function(d) { return parseFloat(d['x']);}, // data -> value
          xScale = d3.scaleLinear().range([0, width]);
          // setup y
          var yValue = function(d) { return parseFloat(d['y']);}, // data -> value
          yScale = d3.scaleLinear().range([height, 0]);
          var svg = d3.select("#linegraph").append("svg")
                      .attr("width", width + margin.left + margin.right)
                      .attr("height", height + margin.top + margin.bottom)
                      .append("g")
                      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        var data_files=["data/Yonghao/Asian.csv","data/Yonghao/Black.csv","data/Yonghao/Hawaiian.csv","data/Yonghao/Hispanics.csv","data/Yonghao/Indian.csv","data/Yonghao/White.csv"];
        //load proper data file based on the selection
        d3.csv(data_files[value], function(data){
          xScale.domain([d3.min(data, xValue)-1, d3.max(data, xValue)+1]);
          yScale.domain([d3.min(data, yValue)-10, d3.max(data, yValue)+10]);
          data.sort(function(a,b){return a.x-b.x});
          //tooltip for extra credit
          var tooltip = d3.select("#linegraph").append("div").attr("id", "toolTip");
          tooltip.style("position","relative").
          style("height","auto").
          style("font-size","14");

          // draw dots
          svg.selectAll(".dot")
             .data(data)
             .enter()
             .append("circle")
             .attr("class", "dot")
             .attr("r", 8)
             .attr("fill", "black")
             .attr("cx", function(d){return xScale(d['x']);})
             .attr("cy", function(d){return yScale(d['y']);})
             .on("mouseover", function(d) {
               //change dot color when mouse hove over
               var dot = d3.select(this);
               dot.style('fill','red')
                  .attr('r',15);
            //show tooltip
               d3.select("#tooltip")
                 .style("left", d3.mouse(this)[0]-width - 45)
                 .style("top", d3.mouse(this)[1]-height - 50)
                 .style("display","inline-block")
                 .text("("+d.x+","+d.y+")");
            })
            .on("mouseout", function(d) {
              //change back the color
              var dot = d3.select(this);
              dot.style('fill','black')
                 .attr('r',8);
              //hide tooltip
              d3.select("#tooltip").style("display","none");
            })
            .on("click",function(d){
              document.getElementById("lineLabel").innerHTML = "Values: "+'('+d.x+','+d.y+')';
            });
            var vline = d3.line()
            .x(function(d) { return xScale(d['x']); })
            .y(function(d) { return yScale(d['y']); });
            svg.append("path")
               .data([data])
               .attr("fill", "none")
               .attr("stroke", "red")
               .attr("stroke-linejoin", "round")
               .attr("stroke-linecap", "round")
               .attr("stroke-width", 3)
               .attr("d", vline(data));
           // x-axis
           svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(xScale));
           svg.append("text")
              .attr("class", "label")
              .text("X")
              .attr("x", width)
              .attr("y", height-5);
           // y-axis
           svg.append("g")
              .call(d3.axisLeft(yScale));
           svg.append("text")
              .attr("class", "label")
              .text("Y")
              .attr("x", 5)
              .attr("y", 0);
         });
       }




        // 5th Asian Female:
        part3(0);
        function part3(value){
          var div = document.getElementById('linegraph3');
          while(div.firstChild){
            div.removeChild(div.firstChild);
          }
          var margin = {top:20, right: 20, bottom: 30, left: 50},
              width = 900- margin.left - margin.right,
              height = 450 - margin.top - margin.bottom;
          var xValue = function(d) { return parseFloat(d['x']);}, // data -> value
          xScale = d3.scaleLinear().range([0, width]);
          // setup y
          var yValue = function(d) { return parseFloat(d['y']);}, // data -> value
          yScale = d3.scaleLinear().range([height, 0]);
          var svg = d3.select("#linegraph3").append("svg")
                      .attr("width", width + margin.left + margin.right)
                      .attr("height", height + margin.top + margin.bottom)
                      .append("g")
                      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        var data_files=["data/Gongyuan/anscombe1.csv"];
        //load proper data file based on the selection
        d3.csv(data_files[value], function(data){
          xScale.domain([d3.min(data, xValue)-1, d3.max(data, xValue)+1]);
          yScale.domain([d3.min(data, yValue)-1, d3.max(data, yValue)+1]);
          data.sort(function(a,b){return a.x-b.x});
          //tooltip for extra credit
          var tooltip = d3.select("#linegraph3").append("div").attr("id", "toolTip");
          tooltip.style("position","relative").
          style("height","auto").
          style("font-size","14");

          // draw dots
          svg.selectAll(".dot")
             .data(data)
             .enter()
             .append("circle")
             .attr("class", "dot")
             .attr("r", 5)
             .attr("fill", "blue")
             .attr("cx", function(d){return xScale(d['x']);})
             .attr("cy", function(d){return yScale(d['y']);})
             .on("mouseover", function(d) {
               //change dot color when mouse hove over
               var dot = d3.select(this);
               dot.style('fill','lightblue')
                  .attr('r',5);
            //show tooltip
               d3.select("#tooltip")
                 .style("left", d3.mouse(this)[0]-width - 45)
                 .style("top", d3.mouse(this)[1]-height - 50)
                 .style("display","inline-block")
                 .text("("+d.x+","+d.y+")");
            })
            .on("mouseout", function(d) {
              //change back the color
              var dot = d3.select(this);
              dot.style('fill','blue')
                 .attr('r',5);
              //hide tooltip
              d3.select("#tooltip").style("display","none");
            })
            .on("click",function(d){
              document.getElementById("lineLabel3").innerHTML = "Values: "+'('+d.x+','+d.y+')';
            });
            var vline = d3.line()
            .x(function(d) { return xScale(d['x']); })
            .y(function(d) { return yScale(d['y']); });
            svg.append("path")
               .data([data])
               .attr("fill", "none")
               .attr("stroke", "red")
               .attr("stroke-linejoin", "round")
               .attr("stroke-linecap", "round")
               .attr("stroke-width", 1)
               .attr("d", vline(data));
           // x-axis
           svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(xScale));
           svg.append("text")
              .attr("class", "label")
              .text("X")
              .attr("x", width)
              .attr("y", height-5);
           // y-axis
           svg.append("g")
              .call(d3.axisLeft(yScale));
           svg.append("text")
              .attr("class", "label")
              .text("Y")
              .attr("x", 5)
              .attr("y", 0);
         });
       }






        // Put your part five code here ***********************
        //This part is similar to former parts and what I mainly do here is changing the margin and size of the graph, and a the same time, add a title for each graph.
        //anscombe_I graph
        part5();
        function part5(){
          var data_files=["data/anscombe_I.csv","data/anscombe_II.csv","data/anscombe_III.csv","data/anscombe_IV.csv"];
          var labels=["Anscombe I","Anscombe II","Anscombe III","Anscombe IV"];
        for(i=0;i<4;i++){
          draw_scatterplot(data_files[i],labels[i]);
        }
        }
        function draw_scatterplot(file,label_text){
        var margin = {top: 20, right: 20, bottom:30, left: 50},
            width = 500 - margin.left - margin.right,
            height = 300 - margin.top - margin.bottom;
        var xValue = function(d) { return parseFloat(d['x']);}, // data -> value
        xScale = d3.scaleLinear().range([0, width]);
        // setup y
        var yValue = function(d) { return parseFloat(d['y']);}, // data -> value
        yScale = d3.scaleLinear().range([height, 0]);
        var svg = d3.select("#area4").append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        d3.csv(file, function(data){
          xScale.domain([d3.min(data, xValue)-1, d3.max(data, xValue)+1]);
          yScale.domain([d3.min(data, yValue)-1, d3.max(data, yValue)+1]);
          // draw dots
          svg.selectAll(".dot")
             .data(data)
             .enter()
             .append("circle")
             .attr("class", "dot")
             .attr("r", 4)
             .attr("cx", function(d){return xScale(d['x']);})
             .attr("cy", function(d){return yScale(d['y']);});
           // x-axis
           svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(xScale));
           svg.append("text")
              .attr("class", "label")
              .text("X")
              .attr("x", width)
              .attr("y", height-5);
           // y-axis
           svg.append("g")
              .call(d3.axisLeft(yScale));
           svg.append("text")
              .attr("class", "label")
              .text("Y")
              .attr("x", 5)
              .attr("y", 0);
          svg.append("text")
             .attr("class", "label")
             .text(label_text)
             .attr("x", width/3)
             .attr("y", 0 ); });
        }

    </script>
</body>
</html>
<script src="project.js"></script>
